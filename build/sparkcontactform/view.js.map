{"version":3,"file":"sparkcontactform/view.js","mappings":"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","sources":["webpack://designingintent-blocks/./src/sparkcontactform/view.js"],"sourcesContent":["/* eslint-disable no-console */\n// console.log(\"Hello from contact form view.js\");\n\n/* eslint-enable no-console */\n\n// Spark.re form and validation\nwindow.addEventListener(\"DOMContentLoaded\", function () {\n\t// Hides spam trap\n\tdocument.getElementById(\"are_you_simulated\").style.display = \"none\";\n\n\t// set the email pattern attribute for input type email fields. it is used for email validation\n\tdocument.querySelectorAll(\"input[type='email']\").forEach(function (el) {\n\t\tel.pattern = \"[^@\\\\s]+@[^@\\\\s]+\\\\.[^@\\\\s]+\";\n\t});\n\n\t// remove required attribute for questions with other option so the main question does not trigger the validation\n\tdocument\n\t\t.querySelectorAll(\n\t\t\t\".project-question.answers.single.required, .project-question.answers.custom.required\",\n\t\t)\n\t\t.forEach(function (question_root) {\n\t\t\tconst qid = question_root.dataset.qid;\n\t\t\tconst other_q = document.querySelector(`#answers_${qid}_other_text`);\n\t\t\tconst input = question_root.querySelector(`#answers_${qid}`);\n\n\t\t\tif (other_q) {\n\t\t\t\tinput.required = false;\n\t\t\t}\n\t\t});\n});\n\n// eslint-disable-next-line no-unused-vars\nfunction validateOtherQuestions() {\n\tconst validation_errors = [];\n\tlet question_text = \"the required questions\";\n\tconst question_roots = document.querySelectorAll(\n\t\t\".project-question.answers.single.required, .project-question.answers.custom.required\",\n\t);\n\n\tquestion_roots.forEach(function (question_root) {\n\t\tconst qid = question_root.dataset.qid;\n\t\tconst other_q = document.querySelector(`#answers_${qid}_other_text`);\n\t\tconst question_label = question_root.querySelector(\".question-text\");\n\t\tconst input = question_root.querySelector(`#answers_${qid}`);\n\n\t\t// if (question_label) {\n\t\t//   question_text = question_label.textContent.replace(' *', '');\n\t\t// }\n\n\t\t// if (other_q && input) {\n\t\t//   if (input.value === '' && other_q.value === '') {\n\t\t//     validation_errors.push(\n\t\t//       `- Please select at least one option from ${question_text}`\n\t\t//     );\n\t\t//   }\n\t\t// }\n\t});\n\n\treturn validation_errors;\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction validateMultipleTypeQuestions() {\n\tconst validation_errors = [];\n\tlet question_text = \"the required questions\";\n\tconst question_roots = document.querySelectorAll(\n\t\t\".project-question.multiple.required\",\n\t);\n\n\tquestion_roots.forEach(function (item) {\n\t\tconst qid = item.dataset.qid;\n\t\tconst other_q = document.querySelector(`#answers_${qid}_other_text`);\n\t\tconst checkboxes = item.querySelectorAll(\"input[type='checkbox']:checked\");\n\t\tconst question = item.querySelector(\".question-text\");\n\n\t\tif (question) {\n\t\t\tquestion_text = question.textContent.replace(\" *\", \"\");\n\t\t}\n\t});\n\n\treturn validation_errors;\n}\n\nfunction validateReCaptcha(form) {\n\t// If you are hosting this form on your own site and have reCAPTCHA enabled,\n\t// ensure that this is populated with your own site key, as well as include\n\t// the following script before this code:\n\t//   <script src=\"https://www.google.com/recaptcha/api.js?render=YOUR_SITE_KEY\">\n\t// For more information, see: https://developers.google.com/recaptcha/docs/v3\n\tvar siteKey = \"6LelXwsqAAAAAKmzqLCznoKCEjj7RqcaqzkOlOnb\";\n\tgrecaptcha.ready(function () {\n\t\tgrecaptcha\n\t\t\t.execute(siteKey, {\n\t\t\t\taction: \"registration\",\n\t\t\t})\n\t\t\t.then(function (token) {\n\t\t\t\tconst tokenInput = document.querySelector(\".g-recaptcha-response\");\n\t\t\t\tif (tokenInput) {\n\t\t\t\t\ttokenInput.value = token;\n\t\t\t\t\tform.appendChild(tokenInput);\n\t\t\t\t\tform.submit();\n\t\t\t\t}\n\t\t\t});\n\t});\n}\n\nfunction validateForm() {\n\tlet validation_errors = [];\n\n\tvalidation_errors = validation_errors.concat(validateOtherQuestions());\n\tvalidation_errors = validation_errors.concat(validateMultipleTypeQuestions());\n\n\treturn validation_errors;\n}\n\nconst form = document.querySelector(\n\t\"body#spark-registration-form form, form#spark-registration-form\",\n);\n\nform.addEventListener(\"submit\", function (e) {\n\tlet validation_errors = validateForm();\n\n\tif (validation_errors.length > 0) {\n\t\talert(\n\t\t\t\"The following fields are incomplete or have errors:\\r\\n\" +\n\t\t\t\tvalidation_errors.join(\"\\r\\n\"),\n\t\t);\n\t\te.preventDefault();\n\t\treturn false;\n\t}\n\n\t// Prevents duplicate submissions\n\tconst button = document.querySelector(\".template-button\");\n\tbutton.disabled = true;\n\n\t// wait for a bit to re-enable the button in case some of the custom validation above failed\n\tsetTimeout(function () {\n\t\tbutton.disabled = false;\n\t}, 2000);\n\n\tvalidateReCaptcha(form);\n\n\te.preventDefault();\n});\n\n// Get and Store UTM Params\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\tfunction getSearchParams(k) {\n\t\tvar p = {};\n\t\tlocation.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (s, k, v) {\n\t\t\tp[k] = v;\n\t\t});\n\t\treturn k ? p[k] : p;\n\t}\n\tsparksource = \"\";\n\tutmsource = getSearchParams(\"utm_source\");\n\tutmcampaign = getSearchParams(\"utm_campaign\");\n\n\tif (utmsource != undefined) {\n\t\t// console.log(utmsource);\n\t\tCookies.set(\"utmcampaign\", utmcampaign, {\n\t\t\texpires: 30,\n\t\t\tpath: \"/\",\n\t\t});\n\t\tCookies.set(\"utmsource\", utmsource, {\n\t\t\texpires: 30,\n\t\t\tpath: \"/\",\n\t\t});\n\t\t// console.log(\"loaded from url\");\n\t\tsparksource = utmsource;\n\t} else {\n\t\tconsole.log(`UTM Sources is ${utmsource}`);\n\t\tutmcampaign = Cookies.get(\"utmcampaign\");\n\t\tutmsource = Cookies.get(\"utmsource\");\n\t\tif (utmsource != undefined) {\n\t\t\t//sparksource = utmsource +' : '+ utmcampaign;\n\t\t\tsparksource = utmsource;\n\t\t\t// console.log(\"loaded from cookie\");\n\t\t}\n\t}\n\n\tif (sparksource != \"\") {\n\t\tconst sourceInput = document.querySelector(\"input[name=source]\");\n\t\tsourceInput.value = sparksource;\n\t}\n});\n"],"names":["window","addEventListener","document","getElementById","style","display","querySelectorAll","forEach","el","pattern","question_root","qid","dataset","other_q","querySelector","input","required","validateOtherQuestions","validation_errors","question_text","question_roots","question_label","validateMultipleTypeQuestions","item","checkboxes","question","textContent","replace","validateReCaptcha","form","siteKey","grecaptcha","ready","execute","action","then","token","tokenInput","value","appendChild","submit","validateForm","concat","e","length","alert","join","preventDefault","button","disabled","setTimeout","getSearchParams","k","p","location","search","s","v","sparksource","utmsource","utmcampaign","undefined","Cookies","set","expires","path","console","log","get","sourceInput"],"sourceRoot":""}